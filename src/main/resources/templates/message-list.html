<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:replace="~{fragments/layout :: layout(pageTitle='메시지 함',
      content=~{::main})}">

<main class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2><i class="bi bi-envelope-fill"></i> 메시지 함</h2>
  </div>

  <div th:if="${conversations.isEmpty()}" class="alert alert-info text-center">
    진행중인 대화가 없습니다.
  </div>

  <div class="list-group" th:unless="${conversations.isEmpty()}">
    <a th:each="conv : ${conversations}"
       th:href="@{|/messages/chat/${conv.partner.id}|}" class="list-group-item list-group-item-action">
      <div class="d-flex w-100 justify-content-between">
        <h5 class="mb-1" th:text="${conv.partner.username}"></h5>
        <small class="timeago" th:title="${#temporals.formatISO(conv.lastMessage.sentAt)}"></small>
      </div>
      <p class="mb-1" th:text="${conv.lastMessage.content}"></p>
    </a>
  </div>
</main>

</html>